<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>shell 常用命令 | Yonferol</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">shell 常用命令</h1><a id="logo" href="/.">Yonferol</a><p class="description">生活需要仪式感</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">shell 常用命令</h1><div class="post-meta"><a href="/2018/04/23/shell常用命令/#comments" class="comment-count"></a><p><span class="date">Apr 23, 2018</span><span><a href="/categories/shell/" class="category">shell</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h3 id="ls命令"><a href="#ls命令" class="headerlink" title="ls命令"></a>ls命令</h3><ul>
<li>语法：ls 【选项】 【目录】</li>
<li>常用参数选项：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. -a：列出目录下的所有文件，包含以.开头的隐藏文件。</span><br><span class="line">2. -A：显示除隐藏文件“.”和“..”以外的所有文件列表。</span><br><span class="line">3. -C：多列显示输出结果。</span><br><span class="line">4. -l：列出文件的详细信息，单列显示。</span><br><span class="line">5. -F：在每个输出项后添加文件的类型标识符。*表示具有可执行权限的普通文件；/表示目录；@表示符号链接；|表示命令管道FIFO；=表示sockets套接字；普通文件不输出任何标识符。</span><br><span class="line">6. -t：根据文件和目录的修改时间排序。</span><br><span class="line">7. -k：以KB（千字节）为单位显示文件大小。</span><br><span class="line">8. -m：用“,”号区隔每个文件和目录的名称。</span><br><span class="line">9. -r：以文件名倒序排列并输出目录内容列表。</span><br><span class="line">10. -L：列出文件的链接名。</span><br><span class="line">11. -R：将目录下所有的子目录的文件都列出来。</span><br></pre></td></tr></table></figure>
<h3 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h3><ol>
<li>netstat</li>
</ol>
<ul>
<li>语法：netstat 【参数】</li>
<li>常用参数选项：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-a / --all：列出所有活动（active）的连接.</span><br><span class="line">-A&lt;网络类型&gt;：列出该网络类型连线中的相关地址;使用rmsock命令可根据该地址查到进程的PID。</span><br><span class="line">-n / --numeric：直接使用ip地址而不是域名显示地址.</span><br><span class="line">-t / --tcp：列出TCP传输协议的连接.</span><br><span class="line">-u / --udp：列出UDP传输协议的连接.</span><br><span class="line">-l / --listening：列出监控中的服务器的Socket。</span><br><span class="line">-p / --programs：列出正在使用Socket的PID和进程名称。</span><br><span class="line">-c / --continuous：持续列出网络状态。</span><br><span class="line">-C / --cache：列出路由器配置的快取信息。</span><br><span class="line">-e / --extend：列出网络其他相关信息。</span><br><span class="line">-M / --masquerade：列出伪装的网络连接。</span><br><span class="line">-i ：显示网卡列表。</span><br><span class="line">-V / --version：显示版本信息。</span><br><span class="line">-w / --raw：显示RAW传输协议的连接情况。</span><br><span class="line">-x / --unix：此参数和&quot;-A unix&quot;参数显示结果相同。</span><br><span class="line">--ip / --inet：此参数和&quot;-A inet&quot;参数显示结果相同。</span><br></pre></td></tr></table></figure>
<ol>
<li>Linux系统查看端口号被占用的方法</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">方法一：lsof -i:端口号。</span><br><span class="line">方法二：首先用 netstat -anp|grep 端口号 。</span><br><span class="line">方法三：netstat -tunlp | grep 端口号。</span><br></pre></td></tr></table></figure>
<ol>
<li><p>AIX系统查看端口号被占用的方法</p>
<blockquote>
<ul>
<li>netstat -an 查看整体情况。</li>
<li>由端口号查找具体的进程：<blockquote>
<ol>
<li>netstat查看端口信息 : netstat -Aan|grep  11000，<br>终端会输出如下信息：f2000522027cbb0 tcp 0  0  158.220.252.214.501 172.17.252.8.6666  ESTABLISHED</li>
<li>如果是TCP连接，则使用rmsock f2000522027cbb0 tcpcb；如果是UDP连接，则使用：<br>rmsock f2000522027cbb0 inpcb。得到输出结果：The socket f2000522027cbb0 is being held by proccess 21736452 (flow).</li>
<li>根据第二步中的PID（21736452）查询具体的程序。ps -ef|grep 21736452 .</li>
</ol>
</blockquote>
</li>
<li>由PID查询使用的端口号：Linux中可以使用netstat -anp 中的选项p来查询；AIX中的查询方法如下：</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -Aan | awk &apos;&#123;print $1&#125;&apos; | while read line; do echo &quot;$line `rmsock $line tcpcb | awk &apos;&#123;print $(NF-1)&#125;&apos;`&quot;;done &gt;&gt; a.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="grep常用法示例："><a href="#grep常用法示例：" class="headerlink" title="grep常用法示例："></a>grep常用法示例：</h3><p>在grep命令中，输入字符串参数时，最好将其用双引号括起来。</p>
<ul>
<li>在所有文件中查询 test ：grep “test” * 。</li>
<li>在两个文件中查询：grep “test” file1 file2 。</li>
<li>在多个文件中查找test 并输出文件名称：grep “test” -l file1 file2 file3 file4</li>
<li>查看file中包含“test”的所有行并显示出来：grep “test” file 。</li>
<li>查看file中包含“test”的行并只显示总行数：grep -c “test” file 。</li>
<li>查看file中包含“test”的所有行显示出来并显示出其行号：grep -n “test” file 。</li>
<li>查看file中不包含“test”的所有行显示出来：grep -v “test” file 。</li>
<li>查看file中包含“test”(忽略大小写)的所有行：grep -i “test” file 。</li>
<li>匹配多个字符串：grep -E ‘aaa|bbb’ file （匹配aaa或者bbb出现的行）  。</li>
<li>同时满足 test1 test2 test3：grep test1 file | grep test2 |grep test3</li>
<li>匹配空行：grep ‘^$’ file 。</li>
<li>匹配IP地址：grep ‘[0-9]{3}.[0-9]{3}.[0-9]{3}‘ file</li>
<li>与管道命令搭配使用：ps -ef|grep 11001 。</li>
<li>grep与正则表达式的一些用法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">grep &apos;^[^test]&apos; file：不匹配行首为test的</span><br><span class="line">grep &apos;test[12]&apos; file： 匹配test1或者test2</span><br><span class="line">grep &apos;[Tt]est&apos; file:匹配Test或者test</span><br><span class="line">grep &apos;T...E&apos; file:匹配T后边三个字符然后E的</span><br><span class="line">grep &apos;t.\&#123;2\&#125;e&apos; file：匹配t后边2个字符然后e的</span><br><span class="line">grep &apos;[A-Z][A-Z]...e&apos; file :头2个字符为大写字母，以e结尾，中间3个任意字符 </span><br><span class="line">grep &apos;x..201[7,8]&apos; file  : 匹配x后边2个任意字符，以2017或者2018结尾的。</span><br><span class="line">grep &apos;t\&#123;3,\&#125;&apos; file ：匹配t至少出现3次</span><br></pre></td></tr></table></figure>
<h3 id="head和tail的常用法示例："><a href="#head和tail的常用法示例：" class="headerlink" title="head和tail的常用法示例："></a>head和tail的常用法示例：</h3><ul>
<li>head常见用法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">head -n 10 file ：查看file中的前十行</span><br><span class="line">head -c 20 file ：查看file中的前20个字节</span><br><span class="line">head -n -10 file ：查看file中除去后10行之外的内容</span><br><span class="line">head -c -20 file ：查看file中除去后20个字节之外的内容</span><br></pre></td></tr></table></figure>
<ul>
<li>tail常见用法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tail -f file ：动态显示file中的内容在屏幕上，默认10行</span><br><span class="line">tail -n 10 file ：显示file文件中的后10行</span><br><span class="line">tail -r -n 10 file :逆序显示file文件中的后10行</span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/shell/">shell</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/04/23/shell中的参数和大小/" class="next">shell中的参数</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#ls命令"><span class="toc-text">ls命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#端口号"><span class="toc-text">端口号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#grep常用法示例："><span class="toc-text">grep常用法示例：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#head和tail的常用法示例："><span class="toc-text">head和tail的常用法示例：</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/04/23/shell常用命令/">shell 常用命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/23/shell中的参数和大小/">shell中的参数</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/18/LINUX文件解压/">Linux文件解压缩命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/17/db2常用语句/">db2常用语句</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/28/摄影构图/">摄影常见构图</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/20/PS学习笔记/">PS学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/20/PS快捷键/">PS常用快捷键</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ps/">Ps</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/db2/">db2</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/tar命令/" style="font-size: 15px;">tar命令</a> <a href="/tags/gunzip命令/" style="font-size: 15px;">gunzip命令</a> <a href="/tags/Ps/" style="font-size: 15px;">Ps</a> <a href="/tags/PS快捷键/" style="font-size: 15px;">PS快捷键</a> <a href="/tags/db2基础/" style="font-size: 15px;">db2基础</a> <a href="/tags/shell中的参数/" style="font-size: 15px;">shell中的参数</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/摄影/" style="font-size: 15px;">摄影</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">Yonferol.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>